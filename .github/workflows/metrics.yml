name: Metrics
on:
  schedule: [{cron: "0 0 * * *"}]
  workflow_dispatch:
jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write # 実行環境にリポジトリへの書き込みを許可する
    steps:
      - uses: lowlighter/metrics@latest
        with:
          # データ取得（読み取り）には自分で作ったトークンを使用
          token: ${{ secrets.METRICS_TOKEN }}
          
          # リポジトリへのプッシュ（書き込み）にはGitHub標準のトークンを使用
          # これにより METRICS_TOKEN に書き込み権限を持たせなくて済む
          committer_token: ${{ github.token }}

          filename: github-metrics.svg
          user: makinzm
          template: classic
          base: header, activity, community, repositories, metadata
          config_timezone: Asia/Tokyo
          
          plugin_calendar: yes
          plugin_calendar_limit: 3
          plugin_reactions: yes
          plugin_topics: yes
          # 言語統計（表のように詳細に出す）
          plugin_languages: yes
          plugin_languages_details: bytes-size, percentage
          plugin_languages_limit: 8
          plugin_languages_sections: most-used
          plugin_languages_indepth: yes

          plugin_rss: yes
          plugin_rss_url: https://qiita.com/making111/feed
          plugin_annilist: yes
          annilist_username: makinzm

